import React, { useEffect, useState } from "react";
import { View } from "react-native";
import { IconButton } from "react-native-paper";
import Svg, { Path } from "react-native-svg";
import { StyleSheet } from "react-native";
import { useRoute } from "@react-navigation/native";
import { useNavigation } from "@react-navigation/native";
function Btn({
  svg,
  isActive,
  onClick,
  desictovate,
}: {
  svg: any;
  isActive: boolean;
  onClick: any;
  desictovate?: boolean;
}) {
  return (
    <IconButton
      icon={svg}
      size={30}
      onPress={onClick}
      iconColor={"black"}
      disabled={desictovate}
      style={isActive ? style.btnActive : style.btninActive}
    ></IconButton>
  );
}
export default function Navbar() {
  const navigation = useNavigation<any>();
  const [pagex, setpagex] = useState("0");
  const route = useRoute<{
    key: string;
    name: string;
    params: { Path?: string };
  }>();
  useEffect(() => {
    if (route.params == undefined) {
      setpagex("Homenormalx");
    } else {
      if (route.params.Path != undefined) {
        setpagex(route.params.Path);
      } else {
        setpagex("Homenormalx");
      }
    }
  }, [route]);
  return (
    <View
      style={{
        flex: 0.15,
        display: "flex",
        justifyContent: "center",
        alignItems: "center",
        flexDirection: "row",
        backgroundColor: "#FFE4C5",
      }}
    >
      <Btn
        isActive={pagex == "Homenormalx"}
        onClick={() =>
          navigation.navigate("Homenormal", {
            screen: "Homenormalx",
            Path: "Homenormalx",
          })
        }
        svg={() => (
          <Svg width="22" height="17" viewBox="0 0 22 17" fill="none">
            <Path
              d="M4.25 4C4.25 3.27065 4.53973 2.57118 5.05546 2.05546C5.57118 1.53973 6.27065 1.25 7 1.25C7.72935 1.25 8.42882 1.53973 8.94454 2.05546C9.46027 2.57118 9.75 3.27065 9.75 4C9.75 4.72935 9.46027 5.42882 8.94454 5.94454C8.42882 6.46027 7.72935 6.75 7 6.75C6.27065 6.75 5.57118 6.46027 5.05546 5.94454C4.53973 5.42882 4.25 4.72935 4.25 4ZM7 0C5.93913 0 4.92172 0.421427 4.17157 1.17157C3.42143 1.92172 3 2.93913 3 4C3 5.06087 3.42143 6.07828 4.17157 6.82843C4.92172 7.57857 5.93913 8 7 8C8.06087 8 9.07828 7.57857 9.82843 6.82843C10.5786 6.07828 11 5.06087 11 4C11 2.93913 10.5786 1.92172 9.82843 1.17157C9.07828 0.421427 8.06087 0 7 0ZM14.25 5C14.25 4.53587 14.4344 4.09075 14.7626 3.76256C15.0908 3.43437 15.5359 3.25 16 3.25C16.4641 3.25 16.9092 3.43437 17.2374 3.76256C17.5656 4.09075 17.75 4.53587 17.75 5C17.75 5.46413 17.5656 5.90925 17.2374 6.23744C16.9092 6.56563 16.4641 6.75 16 6.75C15.5359 6.75 15.0908 6.56563 14.7626 6.23744C14.4344 5.90925 14.25 5.46413 14.25 5ZM16 2C15.2044 2 14.4413 2.31607 13.8787 2.87868C13.3161 3.44129 13 4.20435 13 5C13 5.79565 13.3161 6.55871 13.8787 7.12132C14.4413 7.68393 15.2044 8 16 8C16.7956 8 17.5587 7.68393 18.1213 7.12132C18.6839 6.55871 19 5.79565 19 5C19 4.20435 18.6839 3.44129 18.1213 2.87868C17.5587 2.31607 16.7956 2 16 2ZM16 15.5C14.912 15.5 14.039 15.324 13.342 15.039L13.435 14.919C13.682 14.5935 13.8715 14.2675 14.0165 13.9585C14.5265 14.136 15.1745 14.25 15.9995 14.25C18.1375 14.25 19.086 13.4835 19.531 12.8345C19.7844 12.4616 19.9432 12.0326 19.9935 11.5845C19.9964 11.5552 19.9984 11.5259 19.9995 11.4965V11.375C19.9995 11.03 19.7195 10.75 19.3745 10.75H14.4315C14.3294 10.2877 14.1137 9.85808 13.804 9.5H19.375C19.8723 9.5 20.3492 9.69754 20.7008 10.0492C21.0525 10.4008 21.25 10.8777 21.25 11.375V11.5235L21.2485 11.5665C21.2468 11.6018 21.2435 11.6483 21.2385 11.706C21.1676 12.3639 20.9356 12.9942 20.563 13.541C19.8505 14.579 18.4865 15.5 15.999 15.5M2.375 9.5C1.87772 9.5 1.40081 9.69754 1.04917 10.0492C0.697544 10.4008 0.5 10.8777 0.5 11.375V12.0265L0.502 12.075C0.504 12.115 0.508333 12.168 0.515 12.234C0.5295 12.365 0.557 12.545 0.611 12.759C0.754474 13.3226 1.0095 13.8517 1.361 14.315C2.2395 15.473 3.913 16.5 7 16.5C10.087 16.5 11.761 15.473 12.6385 14.315C12.9902 13.8516 13.2454 13.3223 13.389 12.7585C13.443 12.545 13.4705 12.365 13.485 12.2335C13.4924 12.1647 13.4974 12.0957 13.5 12.0265V11.375C13.5 11.1288 13.4515 10.885 13.3573 10.6575C13.263 10.43 13.1249 10.2233 12.9508 10.0492C12.7767 9.87506 12.57 9.73695 12.3425 9.64273C12.115 9.5485 11.8712 9.5 11.625 9.5H2.375ZM1.7505 12.012L1.75 11.996V11.375C1.75 11.03 2.03 10.75 2.375 10.75H11.625C11.97 10.75 12.25 11.03 12.25 11.375V11.996L12.2495 12.012C12.2387 12.1605 12.2146 12.3078 12.1775 12.452C12.075 12.8534 11.8931 13.2301 11.6425 13.56C11.0515 14.34 9.7875 15.25 7 15.25C4.2125 15.25 2.9485 14.34 2.3575 13.56C2.10699 13.2303 1.92507 12.8537 1.8225 12.4525C1.78541 12.3081 1.76132 12.1607 1.7505 12.012Z"
              fill="black"
            />
          </Svg>
        )}
      />

      <Btn
        isActive={pagex == "Profilenormalx"}
        onClick={() =>
          navigation.navigate("Homenormal", {
            screen: "Profilenormalx",
            Path: "Profilenormalx",
          })
        }
        svg={() => (
          <Svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <Path
              d="M19 20.75C19.2652 20.75 19.5196 20.6446 19.7071 20.4571C19.8946 20.2696 20 20.0152 20 19.75V18.504C20.004 15.698 16.026 13.5 12 13.5C7.974 13.5 4 15.698 4 18.504V19.75C4 20.0152 4.10536 20.2696 4.29289 20.4571C4.48043 20.6446 4.73478 20.75 5 20.75H19ZM15.604 6.854C15.604 7.32728 15.5108 7.79593 15.3297 8.23319C15.1485 8.67045 14.8831 9.06775 14.5484 9.40241C14.2138 9.73707 13.8164 10.0025 13.3792 10.1837C12.9419 10.3648 12.4733 10.458 12 10.458C11.5267 10.458 11.0581 10.3648 10.6208 10.1837C10.1836 10.0025 9.78625 9.73707 9.45159 9.40241C9.11692 9.06775 8.85146 8.67045 8.67034 8.23319C8.48922 7.79593 8.396 7.32728 8.396 6.854C8.396 5.89816 8.77571 4.98147 9.45159 4.30559C10.1275 3.62971 11.0442 3.25 12 3.25C12.9558 3.25 13.8725 3.62971 14.5484 4.30559C15.2243 4.98147 15.604 5.89816 15.604 6.854Z"
              stroke="black"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </Svg>
        )}
      />
    </View>
  );
}
const style = StyleSheet.create({
  btnActive: {
    boxShadow: "0px 4px 4px rgba(0, 0, 0, 0.7)",
    backgroundColor: "#007451",
    borderRadius: 10,
    width: 60,
    height: 60,
    marginLeft: 10,
  },
  btninActive: {
    borderRadius: 10,
    width: 60,
    height: 60,
    marginLeft: 10,
  },
});
